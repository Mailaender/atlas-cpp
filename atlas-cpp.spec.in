%define prefix /usr

Summary: The Atlas protocol C++ implementation
Name: Atlas-C++
Version: @VERSION@
Release: 1
Copyright: LGPL
Group: Amusements/Games
Source: Atlas-C++-@VERSION@.tar.gz
Requires: libstdc++
BuildRoot: /var/tmp/%{name}-buildroot
BuildRequires: gcc-c++ >= 2.95.2

%description
This library implements the Atlas protocol, for use in client-server
game applications. It is the standard implementation used by games written
by the WorldForge project. This library is suitable for linking to either
clients or servers.

%package devel
Summary: The Atlas protocol C++ implementation library headers and static libs.
Group: Amusements/Games
Requires: Atlas-C++ = @VERSION@

%description devel
This library implements the Atlas protocol, for use in client-server
game applications. It is the standard implementation used by games written
by the WorldForge project. This library is suitable for linking to either
clients or servers.

%prep
%setup -q

%build
CFLAGS=$RPM_OPT_FLAGS ./configure --prefix=%{prefix}
make

%install
rm -rf $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT%{prefix} install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{prefix}/lib/libAtlas.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlas.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasMessage.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasMessage.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasCodecs.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasCodecs.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasNet.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasNet.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasFunky.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasFunky.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasObjects.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasObjects.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasObjectsEntity.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasObjectsEntity.so.@ATLAS_CURRENT@
%{prefix}/lib/libAtlasObjectsOperation.so.@ATLAS_INTERFACE_VERSION_NO@
%{prefix}/lib/libAtlasObjectsOperation.so.@ATLAS_CURRENT@
%{prefix}/share/doc/Atlas-C++-@VERSION@/README
%{prefix}/share/doc/Atlas-C++-@VERSION@/COPYING
%{prefix}/share/doc/Atlas-C++-@VERSION@/AUTHORS
%{prefix}/share/doc/Atlas-C++-@VERSION@/THANKS
%{prefix}/share/doc/Atlas-C++-@VERSION@/NEWS

%files devel
%{prefix}/lib/libAtlas.so
%{prefix}/lib/libAtlas.a
%{prefix}/lib/libAtlasMessage.so
%{prefix}/lib/libAtlasMessage.a
%{prefix}/lib/libAtlasCodecs.so
%{prefix}/lib/libAtlasCodecs.a
%{prefix}/lib/libAtlasNet.so
%{prefix}/lib/libAtlasNet.a
%{prefix}/lib/libAtlasFunky.so
%{prefix}/lib/libAtlasFunky.a
%{prefix}/lib/libAtlasObjects.so
%{prefix}/lib/libAtlasObjects.a
%{prefix}/lib/libAtlasObjectsEntity.so
%{prefix}/lib/libAtlasObjectsEntity.a
%{prefix}/lib/libAtlasObjectsOperation.so
%{prefix}/lib/libAtlasObjectsOperation.a
%{prefix}/include/Atlas/Bridge.h
%{prefix}/include/Atlas/Codec.h
%{prefix}/include/Atlas/Negotiate.h
%{prefix}/include/Atlas/Message/Object.h
%{prefix}/include/Atlas/Message/Layer.h
%{prefix}/include/Atlas/Message/Encoder.h
%{prefix}/include/Atlas/Message/DecoderBase.h
%{prefix}/include/Atlas/Message/QueuedDecoder.h
%{prefix}/include/Atlas/Net/Stream.h
%{prefix}/include/Atlas/Net/Loopback.h
%{prefix}/include/Atlas/Funky/Encoder.h
%{prefix}/include/Atlas/Task.h
%{prefix}/include/Atlas/EncoderBase.h
%{prefix}/include/Atlas/Objects/Root.h
%{prefix}/include/Atlas/Objects/Decoder.h
%{prefix}/include/Atlas/Objects/Encoder.h
%{prefix}/include/Atlas/Objects/Entity/Account.h
%{prefix}/include/Atlas/Objects/Entity/Admin.h
%{prefix}/include/Atlas/Objects/Entity/AdminEntity.h
%{prefix}/include/Atlas/Objects/Entity/Game.h
%{prefix}/include/Atlas/Objects/Entity/Player.h
%{prefix}/include/Atlas/Objects/Entity/RootEntity.h
%{prefix}/include/Atlas/Objects/Entity/GameEntity.h
%{prefix}/include/Atlas/Objects/Operation/Action.h
%{prefix}/include/Atlas/Objects/Operation/Appearance.h
%{prefix}/include/Atlas/Objects/Operation/Combine.h
%{prefix}/include/Atlas/Objects/Operation/Communicate.h
%{prefix}/include/Atlas/Objects/Operation/Create.h
%{prefix}/include/Atlas/Objects/Operation/Delete.h
%{prefix}/include/Atlas/Objects/Operation/Disappearance.h
%{prefix}/include/Atlas/Objects/Operation/Divide.h
%{prefix}/include/Atlas/Objects/Operation/Error.h
%{prefix}/include/Atlas/Objects/Operation/Feel.h
%{prefix}/include/Atlas/Objects/Operation/Get.h
%{prefix}/include/Atlas/Objects/Operation/Imaginary.h
%{prefix}/include/Atlas/Objects/Operation/Info.h
%{prefix}/include/Atlas/Objects/Operation/Listen.h
%{prefix}/include/Atlas/Objects/Operation/Login.h
%{prefix}/include/Atlas/Objects/Operation/Logout.h
%{prefix}/include/Atlas/Objects/Operation/Look.h
%{prefix}/include/Atlas/Objects/Operation/Move.h
%{prefix}/include/Atlas/Objects/Operation/Perceive.h
%{prefix}/include/Atlas/Objects/Operation/Perception.h
%{prefix}/include/Atlas/Objects/Operation/RootOperation.h
%{prefix}/include/Atlas/Objects/Operation/Set.h
%{prefix}/include/Atlas/Objects/Operation/Sight.h
%{prefix}/include/Atlas/Objects/Operation/Smell.h
%{prefix}/include/Atlas/Objects/Operation/Sniff.h
%{prefix}/include/Atlas/Objects/Operation/Sound.h
%{prefix}/include/Atlas/Objects/Operation/Talk.h
%{prefix}/include/Atlas/Objects/Operation/Touch.h
%{prefix}/share/aclocal/atlas.m4
